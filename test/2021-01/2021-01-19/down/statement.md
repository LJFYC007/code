# 模拟赛

<style>
table th:first-of-type {
    width: 25%;
}
table th:nth-of-type(2) {
    width: 25%;
}
table th:nth-of-type(3) {
    width: 25%;
}
table th:nth-of-type(4) {
    width: 25%;
}
</style>

| 题目名称       | 海域     | 展览会         | 台         |
| ---------- | :------------- | :------------- | :------------- |
| 题目类型       | 传统型   | 传统型         | 传统型     |
| 英文名称       | sea      | exhibition     | stairs     |
| 提交文件名     | sea.cpp  | exhibition.cpp | stairs.cpp |
| 输入文件名     | sea.in   | exhibition.in  | stairs.in  |
| 输出文件名     | sea.out  | exhibition.out | stairs.out |
| 每个测试点时限 | $1.0$ 秒 | $3.0$ 秒       | $1.0$ 秒   |
| 内存限制       | $1024$ MB | $512$ MB       | $512$ MB   |
| 子任务数目     | 6        | 7              | 7          |
| 测试点是否等分 | 否       | 否             | 否         |

#### 注意事项

- 选手提交的源程序应放在个人目录下与题目名称对应的目录中。
- 程序可以使用的栈空间大小与该题空间限制一致。
- 根据具体评测环境的差异，可将题目时限调整为标程运行所用时间的 **2** 倍。
- 采用的编译命令为 `-lm -O2 -std=c++11`
- 题目不一定按照难度排序。

<div STYLE="page-break-after: always;"></div>

### 海域（sea）

#### 题目描述

​		在一片风平浪静的海域中，有 $n$ 个岛屿，有 $n-1$ 条道路将它们相连，但是，由于某些特殊的原因，原来的双向道路全部都毁坏了一半，也就是变成了单向道路，现在每一座岛屿的权值定义为从该岛屿出发可以到达的岛屿数（包括自身），整片海域的权值定义为所有岛屿的权值的积，然而又因为一些特殊的原因，和这些岛屿之间的联系也被切断了，所以你并不知道道路具体的方向，于是你想知道对于所有可能的海域的情况的权值的和，由于答案可能很大，你只需要给出答案对 $998244353$ 取模的结果。

#### 输入格式

从 `sea.in` 中读入数据。

第一行，一个数 $n$，表示树的节点数。

第二行至第 $n$ 行，每行两个数 $u_i,v_i$ ，表示树上的一条边。

#### 输出格式

输出到 `sea.out` 中。

一行，一个整数，所有情况下的树的权值和。

#### 输入样例 1

```
4
1 2
2 3
2 4
```

#### 输出样例 1

```
102
```

#### 输入输出样例 2

见选手目录下的 `ex_sea.in/out`

#### 数据规模

对于 $100\%$ 的数据，满足 $1\leq n\leq 400,1\leq u_i,v_i\leq n,u_i\neq v_i$，满足给出的图是一棵树。

子任务如下表所示：
| 子任务编号 |    $n$    | 特殊性质 | 分值 |
| :--------: | :-------: | :------: | :--: |
|     1      | $\leq 15$ |    -     |  3   |
|     2      | $\leq 40$ |    -     |  12  |
|     3      | $\leq 80$ |    -     |  30  |
|     4      |     -     |    A     |  10  |
|     5      |     -     |    B     |  10  |
|     6      |     -     |    -     |  35  |

特殊性质 A：保证 $\forall 1\leq i<n,u_i=i,v_i=i+1$。

特殊性质 B：保证 $\forall 1\leq i<n,u_i=1$。

<div STYLE="page-break-after: always;"></div>

### 展览会（exhibition）

#### 题目描述

​		有一场展览会，一共有 $n$ 个展馆，每一个展馆有一个开放时间 $l_i\sim r_i$，注意，每一个展馆在第 $l_i$ 时刻开启，在第 $r_i$ 时刻关闭（即：包含 $l_i$ 但不包含 $r_i$）。

​		两两展馆之间都有道路，并且只有在两个展馆同时开放时道路才会开放。

​		道路每开放 $1$ 个单位的时间就需要消耗 $1$ 个单位的费用，现在主办方想要保留若干条道路，希望所有道路开放的总时间最小，并且要求所有保留的道路开放时间不能为零且所有的展馆能够被道路连通，问最小的每一条保留道路开放的时间总和是多少。

#### 输入格式

从 `exhibition.in` 中读入数据。

输入一共 $n+1$ 行。

第一行一个正整数 $n$ 。

第 $2\sim n+1$ 行每行有两个数 $l_i,r_i$ 。

#### 输出格式

输出到 `exhibition.out` 中。

一行一个数，最小开放的总时间。

如果展馆无法通过开放时间不为 $0$ 的道路连通，输出 `-1` 。

#### 输入样例 1

```
3
1 4
2 6
3 4
```

#### 输出样例 1

```
2
```

#### 输入样例 2

```
2
1 3
3 5
```

#### 输出样例 2

```
-1
```

#### 输入输出样例 3

见下发文件中的 `ex_exhibition.in/out`

####  数据规模

对于 $100\%$ 的数据，保证： $1\leq n\leq 10^5$，$1\leq l_i<r_i\leq 10^9$

子任务如下表所示：

| 子任务编号 |         $n$         |      特殊性质      | 分值 |
| :--------: | :-----------------: | :----------------: | :--: |
|     1      |          -          |    保证数据无解    |  1   |
|     2      |     $\leq 1000$     |         -          |  10  |
|     3      |          -          | $1\leq l<r\leq 50$ |  5   |
|     4      | $\leq 1\times 10^4$ |         -          |  30  |
|     5      | $\leq 5\times 10^4$ |         -          |  20  |
|     6      |          -          |         A          |  10  |
|     7      |          -          |         -          |  24  |

特殊性质 A ： 保证不存在一个展馆在另一个展馆 $j$ 开展之后开展，并且在 $j$ 结束展览之前结束。即：$\nexists i$ 使得 $\exists j\neq i,l_j\leq l_i < r_i \leq r_j$ 。

<div STYLE="page-break-after: always;"></div>

### 台（stairs）

#### 题目描述

​		有 $n$ 个台阶，你可以花费 $a_i$ 的代价把第 $i(1<i<n)$ 个台阶高度加一或减一，求最小代价使得相邻两个台阶的高度差不超过 $d$。

​		**注意：一个台阶的高度可以被减为负数。**

#### 输入格式

从 `stairs.in` 中读入数据。

第一行两个整数 $n$ 和 $d$ 。

第二行 $n$ 个整数，其中第 $i$ 个整数 $h_i$ 表示第 $i$ 个台阶的高度。

第三行 $n-2$ 个整数，其中第 $i$ 个整数 $a_i$ 表示改变第 $i+1$ 个台阶高度的代价。

#### 输出格式

输出到 `stairs.out` 中。

输出一个整数表示最小代价。

为了防止部分答案可能会超过 `long long` 范围，答案对 $998244353$ 取模。

如果无解，请输出 `Impossible` 。

#### 输入样例 1

```
3 2
1 5 2
1
```

#### 输出样例 1

```
2
```

#### 输入样例 2

```
2 1
1 10

```

#### 输出样例 2

```
Impossible
```

#### 输入输出样例 3

见选手目录下的 `ex_stairs1.in/out`

#### 输入输出样例 4

见选手目录下的 `ex_stairs2.in/out`

#### 数据规模

对于 $100\%$ 的数据：
$2\leq n\leq 5\times 10^5,1\leq a_i\leq 10^5,1\leq h_i\leq 10^6,1\leq d\leq 5$，$\forall 1< i< n,h_i\geq h_{i-1}-d-10$

子任务如下表所示：

| 子任务编号 |         $n$         |         $h_i$          |      特殊性质       | 分值 |
| :--------: | :-----------------: | :--------------------: | :-----------------: | :--: |
|     1      |      $\leq 5$       |      $\leq 10^6$       |          -          |  2   |
|     2      |     $\leq 100$      |       $\leq 100$       |          -          |  10  |
|     3      |     $\leq 1000$     |      $\leq 1000$       |          -          |  12  |
|     4      | $\leq 5\times 10^5$ | $h_i\leq 1\times 10^5$ |          -          |  30  |
|     5      |          -          |           -            |  $h_i\geq h_{i-1}$  |  10  |
|     6      |          -          |           -            | $h_i\geq h_{i-1}-d$ |  20  |
|     7      |          -          |           -            |          -          |  16  |