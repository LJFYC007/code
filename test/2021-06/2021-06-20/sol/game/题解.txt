代主力秒了这道题
考虑一个位置能否留下来
把这个位置打败或平局的位置成为红点，否则是黑点
那么充要条件是存在要给红点，满足:
1.左边都是红点，或者存在一个该红点能打败的黑点
2.右边都是红点，或者存在一个该红点能打败的黑点
相同值的位置一起解决，于是可以$O(nm)$解决