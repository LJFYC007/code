原题agc 053 E

一个排列合法,满足以下两个条件其中一个即可,不妨令$a_i<b_i$(下面的a,b都是排列后的)

1.对于$1<=i<n,b_i>a_{i+1}$

2.存在$p<n$,对于$1 \leqslant i <p$,$b_i>a_{i+1}$,对于$p+1 <i \leqslant n$,$b_i>a_{i-1}$,以及$b_p<a_{p+1}$

p存在肯定是唯一的,1,2条件不会重复计数

实际上我们将数按b_i排序，定义$t_i$为j>i,且$b_i>a_j$的个数,那么1的方案数为$\prod (t_i+1)$,2的情况枚举好$(a_{p+1}，b_{p+1})$，然后类似1计数即可

时间复杂度:$O(n)$