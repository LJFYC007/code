### 装箱游戏(D)

#### 题目描述

你在玩一个装箱游戏，在这个游戏中，初始有 $n$ 个空盒子，每次以某种概率随机给出 $A,B,C,D$ 这四种字符中的一个，你需要将其放入一个当前为空的盒子（你可以选择放入哪个盒子，但你不知道后面出现的字符序列）。一共会有 $n$ 轮， $n$ 轮过后所有盒子都会被装满，你想要让最终的状态里盒子中的字符字典序单调不降，求在最优策略下，你获胜的概率。

#### 输入格式

第一行一个正整数 $n$，代表盒子的数量。

第二行四个整数 $p_a,p_b,p_c,p_d(p_a+p_b+p_c+p_d=100)$ ，分别代表 $A,B,C,D$ 出现的百分比。

#### 输出格式

一行一个小数，代表获胜的概率，保留 $6$ 位小数。

#### 样例输入1

```
3
25 25 25 25
```

#### 样例输出1

```
0.750000
```

#### 样例输入2

```
5
10 20 30 40
```

#### 样例输出2

```
0.621160
```

#### 数据范围

| 测试点编号 | $n\leq$ |        特殊限制        |
| :--------: | :-----: | :--------------------: |
|     1      |  $10$   |           无           |
|     2      |  $20$   |    保证 $p_b=p_c=0$    |
|     3      |  $20$   |           无           |
|     4      |  $40$   |      保证 $p_a=0$      |
|     5      |  $40$   |           无           |
|     6      |  $70$   |      保证 $p_d=0$      |
|     7      |  $70$   |           无           |
|     8      |  $250$  | 保证 $p_a=p_b=p_c=p_d$ |
|     9      |  $250$  |           无           |
|     10     |  $250$  |           无           |

时间限制：1s

空间限制：1GB

<div STYLE="page-break-after: always;"></div>

### 库图鲁(kutulu)

#### 题目描述

Goodeat喜爱游戏*Tree of Kutulu*。这是一个回合制游戏。这个游戏是在一个有$n$个结点，$n-1$条无向边的连通图上进行的。换言之，游戏地图形成了一棵树。Goodeat开始时在$1$号结点上。

总共进行$h$个回合，第$x$回合按如下流程进行：

1.如果$x \equiv 1 \pmod k$，那么对于$1\le i\le n$，第$i$个结点上出现$a_i$只新的怪兽。

2.Goodeat执行以下两个操作之一：移动到一个相邻结点或不动。

3.每只怪兽沿着到Goodeat所在结点的最短路径行走到相邻结点。特别地，若某只怪兽与Goodeat位于同一结点，那么它不动。

4.对每只与Goodeat在同一结点上的怪兽，Goodeat会与它战斗，然后这只怪兽被击杀并离开游戏。

Goodeat的目标是与尽可能少的怪物打斗。你需要计算出Goodeat最少与多少怪物战斗。

#### 输入格式

第1行，三个正整数$n,k,h$

第2行，$n$个整数$a_1,a_2,\dots,a_n$

接下来$n-1$行描述地图，每行两个正整数$u,v(1\le u,v\le n,u\neq v)$，表示$u$与$v$之间有一条边。

#### 输出格式

一行一个整数，表示Goodeat最少与多少怪物战斗。

#### 样例输入一

```
3 1 6
0 0 1
1 2
2 3
```

#### 样例输出一

```
5
```

#### 样例解释一

第$1$回合，$3$结点上产生一只怪兽，Goodeat移动到$2$，怪兽移动到$2$，Goodeat与它战斗

第$2$回合，$3$结点上产生一只怪兽，Goodeat移动到$3$，怪兽不动，Goodeat与它战斗

第$3$回合，$3$结点上产生一只怪兽，Goodeat移动到$2$，怪兽移动到$2$，Goodeat与它战斗

第$4$回合，$3$结点上产生一只怪兽，Goodeat移动到$1$，怪兽移动到$2$

第$5$回合，$3$结点上产生一只怪兽，Goodeat不动，$2$结点上的怪兽移动到$1$，Goodeat与它战斗；$3$结点上的怪兽移动到$2$

第$6$回合，$3$结点上产生一只怪兽，Goodeat不动，$2$结点上的怪兽移动到$1$，Goodeat与它战斗；$3$结点上的怪兽移动到$2$

注意，这可能并不是唯一的最优解。

#### 样例输入二

```
4 2 5
0 1 1 1
1 2
1 3
1 4
```

#### 样例输出二

```
7
```

#### 样例三

见附加文件中的 `ex_kutulu3.in/ans`

#### 限制与约定

对于前$10\texttt{%}$的数据 $n,h \leq 4$

对于前$30\texttt{%}$的数据 $n,h \leq 300$

对于前$50\texttt{%}$的数据 $n \leq 5000$

对于另外$20\texttt{%}$的数据 地图形成一条链

对于$100\texttt{%}$的数据 $1\le n\le 10^5,1\le k\le h\le 10^9,0\le a_i\le 10^4$

时间限制：2s

空间限制：1GB

<div STYLE="page-break-after: always;"></div>

### 树(tree)

#### 题目描述

邓老师种了一排树。这些树共有$n$棵，等间距的排在一条路上，第$i$棵树的初始高度为$h_i$。

邓老师希望这些树茁壮成长。因此，他有时会调查第$l$棵到第$r$棵树的高度之和。同时，他还会给这些树施肥。当他给第$l$棵到第$r$棵的每一棵树施用品质为$c$的肥料时，这些树的高度会立刻分别增加$c$。当然，邓老师有可能买到盗版货，因此$c$可能小于$0$。这时候，这些树的高度会立刻减少$-c$。

邓老师养了一只史莱姆，这只史莱姆喜欢在树上蹦跳。为了避免史莱姆有危险，邓老师有时会对一段树木进行修剪。当邓老师修剪第$l$棵到第$r$棵树时，他可以从这段区间中选择若干棵树使它们的高度减小，使得相邻两棵树的高度差不大于$k$，且树的高度和尽可能大。

形式化的，假设当前第$l$棵到第$r$棵树的高度分别为$a_l,a_{l+1},\dots,a_r$，邓老师会将它们变为$b_l,b_{l+1},\dots,b_r$，并遵循以下原则：

- $\forall l\le i\le r$，使$b_i\le a_i$。

- $\forall l\le i< r$，使 $|b_i-b_{i+1}|\le k$。

- 在满足上述条件的同时，使$\sum\limits_{i=l}^rb_i$尽可能大。

可以证明，满足上述条件的$b_l,b_{l+1},\dots,b_r$是唯一的。

请帮助邓老师完成这几种操作。

值得注意的是，邓老师生活在一个魔幻的世界中，因此树木的高度可以是负数或$0$。

#### 输入格式

第一行，三个非负整数$n,m,k$。

第二行，$n$个整数$h_1,h_2,\dots,h_n$。

接下来$m$行，每行首先有一个整数$op$，代表操作类型。

- $op=1$，则再输入两个整数$l,r$，表示邓老师调查第$l$棵到第$r$棵树的高度之和。
- $op=2$，则再输入三个整数$l,r,c$，表示邓老师给第$l$棵到第$r$棵树施用品质为$c$的肥料。
- $op=3$，则再输入两个整数$l,r$，表示邓老师对第$l$棵到第$r$棵进行修剪。修剪的定义见题目描述。

#### 输出格式

对每一个$op=1$的操作，输出一行，表示答案。

#### 样例输入一

```
5 5 1
2 4 5 3 1
1 1 5
2 2 4 1
1 3 5
3 1 3
1 2 4
```

#### 样例输出一

```
15
11
11
```

#### 样例解释一

序列初始为$\{2,4,5,3,1\}$，执行"2 2 4 1"后为$\{2,5,6,4,1\}$，执行"3 1 3"后为$\{2,3,4,4,1\}$。

#### 样例二

见附加文件中的 `ex_tree2.in/ans`

#### 限制与约定

对于前$10\texttt{%}$的数据，$n,m\le 5,h_i\le 5,k\le 2,-2\le c\le 2$。

对于前$30\texttt{%}$的数据，$n,m\le 10^3$。

对于另外$10\texttt{%}$的数据，$op=3$的操作不超过$10$次。

对于另外$10\texttt{%}$的数据，$op=3$的操作不超过$100$次。

对于另外$30\texttt{%}$的数据，在第$i$次操作中，$op\equiv i\pmod 3$，且当$op=3$时，$l=1,r=n$。

对于$100\texttt{%}$的数据，$1\le n,m\le 10^5,1\le h_i\le 10^9,1\le l\le r\le n,1\le k\le 10^4,-10^4\le c\le 10^4$。

时间限制：2s

空间限制：1GB
